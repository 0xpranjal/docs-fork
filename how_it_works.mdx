---
title: "How it works ðŸ§ "
sidebarTitle: "How it works"
---

The [API](/api-reference) is the main way to interact with the platform. It allows you to create and manage agents, phone numbers, and create calls.

# Agents

`Agent` is a fancy word for an AI configuration that can be used in both web and phone calls.

You can specify the agent's voice, context, and other properties. You can use an agent's `id` when creating a call or create a `PhoneNumber` that will use the agent when receiving inbound calls.

## Callback URL

As part of the `Agent`, you can optionally specify a `callbackUrl`. This is your server's URL that the agent will use when retreiving context, performing function calls, and sending call summaries / recordings.

### Retreiving Context

This is for if you need to customize the agent's context by retrieving it from your server. If `callbackUrl` is specified and `context` is not, the agent will make a `GET` request to the `callbackUrl` with the `userPhoneNumber` and `agentId` as query parameters. Your server should respond with a JSON object containing the context, like so:

```json
{
  "context": "You are an assistant at a law firm. You are calling to confirm an appointment with a client."
}
```

### Function Calling

Vapi fully supports [OpenAI's function calling API](https://platform.openai.com/docs/guides/gpt/function-calling), so you can have agents ping your server to perform actions like sending emails, retrieve information, and more. GPT-4 will automatically determine what functions to call based on the context you provide and the user's input.

If `functions` are defined on the agent, it will use the `callbackUrl` to make a `POST` request with the following body:

<Snippet file="function.body.mdx" />

Your server should respond with a JSON object containing the function's response, like so:

```json
{
  "result": "Your email has been sent."
}
```

### End of Call Report

When a call ends, the agent will make a `POST` request to the `callbackUrl` with the following body:

<Snippet file="end.body.mdx" />
